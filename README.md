# env-monitor-sys

## 2.功能介绍

### 2.1 tcp服务器

实现了tcp服务器接收多个客户端的功能，程序可以同时响应多个数据采集模块发来的信息。

获取到的数据数量可能不一，但是程序都能很好的识别并保存到数据库。

### 2.2 http服务器

通过多线程的方式可以与tcp服务器同时运行，响应web前端的Get或Post请求然后在对应api接口发送数据。

### 2.3 配置信息

通过一个esys.conf的配置文件将程序需要的一些配置信息提前导入，比如http和tcp的端口号，数据库登录的信息、警告响应的阈值等等。

### 2.4 日志模块

程序将不同模块的控制台数据保存到日志文件中，并且为每一行日志添加了时间信息；此外，对于可能会刷屏的日志信息，在配置文件中可以设置开启和关闭。

### 2.5 数据库读写

程序完成了多种数据库读写的代码，并且使用共享锁和独占锁保证在多线程环境下对数据库读写的安全性。

### 2.6 web服务器

通过Vue3和echarts+element plus等组件的使用，使web服务器的界面简洁但高级，且动态实时的刷新数据。

### 2.7 警告模块

通过在配置文件中设置好的阈值信息，系统会实时的判断是否有超过阈值的采集到的数据，该判断是区分ip的，且能做到web端到板子的及时反馈。且有一个警告延时模块，通过设定好的延时时间，能保证在设定时间内警告模块能一直运行。

### 2.8 其他方面

**可用性设计**：程序启动时如果没有配置文件程序会自动用默认配置创建，没有数据库程序也可以通过搜索建表文件进行自动创建，报错信息会显示到控制台和日志文件中，方便排查问题。

**小体量的程序**：主程序的大小不到1000KB，web服务器的大小也不到3MB，在其他windows(10+)平台上可移植，未来会做linux的移植。
